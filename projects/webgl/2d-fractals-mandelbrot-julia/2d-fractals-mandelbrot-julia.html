<!-- Computer Graphics and Interfaces 2016-2017 -->

<!-- Lab Work 1 - Fractals - Sets of Mandelbrot and Julia -->

<!-- 45404 Daniel Pimenta d.pimenta@campus.fct.unl.pt -->
<!-- 42648 Ruben Barreiro r.barreiro@campus.fct.unl.pt -->


<!DOCTYPE html>
<html>
<head>

<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/rubenandrebarreiro/rubenandrebarreiro.github.io/master/assets/images/javascript-logo-1.png"/>
    
<script id="vertex-shader" type="x-shader/x-vertex">
        uniform float scale;
        uniform vec2 center;
        
        attribute vec4 vPosition;
        varying vec2 fPosition;
	
        void main() {
            gl_Position = vPosition;
            fPosition = vec2(center.x+vPosition.x/scale, center.y+vPosition.y/scale);
        }   
</script>
    
<script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        
        uniform float factor;
        uniform vec2 c;
        uniform bool mandelbrot;
	
        const int maxiterations = 100; 
        
        varying vec2 fPosition;
        
        int fractal(vec2 z0, vec2 c) {
            vec2 z = z0;
            for (int i = 0; i < maxiterations; i++) {
                z = vec2(z.x * z.x - z.y * z.y, z.x * z.y + z.x * z.y) + c; 
                if (z.x * z.x + z.y * z.y > 4.0)
                    return i;
            }
            return -1;
        }
        
        vec3 paletize(float v, float factor) {
            if (v < 0.0) 
                return vec3(0);
            float vv = v * factor;
            return vec3(sin(vv/3.0), cos(vv/6.0), cos(vv/(12.0+3.14/4.0)));
        }
        
        void main() { 
            vec2 z0 = mandelbrot ? c : fPosition;
            vec2 c0 = mandelbrot ? fPosition : c;

            int color_index = fractal(z0, c0);
            vec3 color = paletize(float(color_index), factor);
            
            gl_FragColor = vec4(color, 1.0);
        }
</script>
    
<script type="text/javascript" src="2d-fractals-mandelbrot-julia.js"></script>
<script type="text/javascript" src="../Common/webgl-utils.js"></script>
<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MV.js"></script>
    
</head>
    
<body>
    <title>Fractals - Benoit Mandelbrot & Gaston Julia</title>
    
    <br>
    <div id="container" style="display: inline-block">
    <canvas id="gl-canvas" width="512" height="512">
        Oops... your browser doesn't support the HTML5 canvas element"
    </canvas>
   
    <h3>Computer Science and Engineering MSc <i>(FCT/UNL)</i></h3>
    <h4>Computer Graphics and Interfaces - Lab Work 1</h4>
    </div>
        
    <div id="authorsInstructionsFactorsAndSets" style="display: inline-block; vertical-align: top">    
        <h2>Authors:
            <br>
            &nbsp;-&nbsp;<u><i>R&uacute;ben Andr&eacute; Barreiro</i></u> - no. 42648
            <br>
            &nbsp;-&nbsp;<u><i>Daniel Pimenta</i></u> - no. 45404
        </h2>
        
        <b>Instructions:</b>
        <font size="2">
            <br>
                - Use <b><i>'Q'</i></b> and <b><i>'A'</i></b> keys dive/emerge. Use <b><i>click/drag/release</i></b> in the canvas to move center point;
            <br>
                - Choose the current <b><i>Fractal's Set</i></b> in use (<i>Benoit Mandelbrot</i> or <i>Gaston Julia</i>);
            <br>
                - Choose also the current <i>Factor</i> to the <i>Scale</i> of the current <b><i>Fractal</i></b> in use;
            <br>
        </font>
        
        <br>
        <br>
        
        <b>Settings/Adjustments:</b>
        <br>
        <b>Factor:</b> <input id="factor" type="range" min="0.00" max="2.00" step="0.01" value="1.0">
        <br>
        <b>Fractal type:</b> 
        <select id="fractal">
            <option>Mandelbrot</option>
            <option>Julia c=-0.4+0.6i</option>
            <option>Julia c=0.285+0i</option>
            <option>Julia c=0.285+0.01i</option>
            <option>Julia c=-0.8+0.156i</option>
            <option>Julia c=-0.8i</option>
            <!-- extra -->
            <option>Julia c=0.45+0.1428i</option>
            <option>Julia c=-0.70176-0.3842i</option>
            <option>Julia c=-0.835-0.2321i</option>
        </select>
    </div>    
    
</body>
</html>